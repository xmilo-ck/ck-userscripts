// ==UserScript==
// @name         Neopets: The Void Within enhancer
// @namespace    xmilo@clraik
// @version      1.1.0
// @description  Removal of (one too many) unnecessary pop-up/confirmation dialogs! Addition of navigation bar to the main plot hub on related pages such as Volunteer Centre and Barracks! Addition of new drop-down menu to provide you links to Volunteer Centre and Barracks!
// @author       xmilo
// @include      /https?://(?:www\.)?neopets\.com/(hospital/volunteer*|dome/barracks*|tvw*)/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=neopets.com
// @grant        GM.xmlHttpRequest
// @grant        GM_xmlhttpRequest
// @connect      www.jellyneo.net
// ==/UserScript==

let addTvwBar=_0x389eb6=>{let _0x4d92fa='<link\x20href'+'=\x22https://'+'images.neo'+'pets.com/p'+'lots/commo'+'n/hub/head'+'er.css?v=2'+'0240708\x22\x20r'+'el=\x22styles'+'heet\x22\x20type'+'=\x22text/css'+'\x22><link\x20hr'+'ef=\x22https:'+'//images.n'+'eopets.com'+'/plots/tvw'+'/header/he'+'ader.css?v'+'=20240708\x22'+'\x20rel=\x22styl'+'esheet\x22\x20ty'+'pe=\x22text/c'+'ss\x22><link\x20'+'href=\x22http'+'s://images'+'.neopets.c'+'om/plots/t'+'vw/popups.'+'css?v=2024'+'0708\x22\x20rel='+'\x22styleshee'+'t\x22\x20type=\x22t'+'ext/css\x22><'+'div\x20class='+'\x22plothub-h'+'eader\x20tvw\x22'+'><div\x20clas'+'s=\x22plothub'+'-banner\x22><'+'div\x20class='+'\x22plothub-a'+'nchor\x22></d'+'iv><a\x20href'+'=\x22https://'+'classic.su'+'pport.neop'+'ets.com/hc'+'/en-us/sec'+'tions/2734'+'1322949773'+'-The-Void-'+'Within\x22><d'+'iv\x20class=\x22'+'q-button__'+'2020\x20butto'+'n-default_'+'_2020\x20plot'+'hub-faq\x22><'+'/div></a><'+'/div><div\x20'+'class=\x22plo'+'thub-nav\x22>'+'<ul><li\x20cl'+'ass=\x22activ'+'e\x22><a\x20clas'+'s=\x22plothub'+'-nav-link\x22'+'\x20href=\x22/tv'+'w/\x22><span>'+'Home</span'+'></a></li>'+'<li><a\x20cla'+'ss=\x22plothu'+'b-nav-link'+'\x22\x20href=\x22/t'+'vw/story/\x22'+'><span>Sto'+'ry</span><'+'/a></li><l'+'i><a\x20class'+'=\x22plothub-'+'nav-link\x22\x20'+'href=\x22/neo'+'boards/boa'+'rdlist.pht'+'ml?board=5'+'8\x22><span>B'+'oard</span'+'></a></li>'+'<li\x20class='+'\x22dropdown\x22'+'><a\x20class='+'\x22plothub-n'+'av-link\x22\x20h'+'ref=\x22/tvw/'+'battle/\x22><'+'span>Battl'+'e</span></'+'a><ul\x20clas'+'s=\x22dropdow'+('n-content\x22'+'><li><a\x20hr'+'ef=\x22/hospi'+'tal/volunt'+'eer.phtml\x22'+'>Volunteer'+'\x20Centre</a'+'></li><li>'+'<a\x20href=\x22/'+'dome/barra'+'cks.phtml\x22'+'>Reserve\x20B'+'arracks</a'+'></li></ul'+'></li><li>'+'<a\x20class=\x22'+'plothub-na'+'v-link\x22\x20hr'+'ef=\x22/tvw/r'+'ewards/\x22><'+'span>Rewar'+'ds</span><'+'/a></li><l'+'i\x20class=\x22i'+'nactive\x22><'+'a\x20class=\x22p'+'lothub-nav'+'-link\x20plot'+'hub-toolti'+'p-button\x22\x20'+'ontouchsta'+'rt=\x22PlotHu'+'b.showTool'+'tip(this)\x22'+'\x20aria-labe'+'l=\x22Coming\x20'+'Soon!\x22><sp'+'an>Solutio'+'ns</span><'+'div\x20class='+'\x22plothub-t'+'ooltip\x22><p'+'>Coming\x20So'+'on!</p></d'+'iv></a></l'+'i><li><a\x20c'+'lass=\x22plot'+'hub-nav-li'+'nk\x22\x20href=\x22'+'//ncmall.n'+'eopets.com'+'/mall/shop'+'.phtml\x22><s'+'pan>NC\x20Mal'+'l</span></'+'a></li><li'+'\x20class=\x22pl'+'othub-mobi'+'le\x22><div\x20t'+'abindex=\x220'+'\x22\x20id=\x22Plot'+'NavArrow\x22\x20'+'class=\x22plo'+'thub-nav-a'+'rrow\x22\x20oncl'+'ick=\x22PlotH'+'ub.toggleM'+'obileNav(t'+'his)\x22\x20onke'+'yup=\x22PlotH'+'ub.clickEl'+'ement(even'+'t)\x22><span\x20'+'class=\x22plo'+'thub-arrow'+'\x22>▾</span>'+'</div></li'+'></ul><div'+'\x20id=\x22PlotM'+'obileNav\x22\x20'+'class=\x22plo'+'thub-mobil'+'e-nav\x22><ul'+'><li\x20class'+'=\x22active\x22>'+'<a\x20class=\x22'+'plothub-na'+'v-link\x22\x20hr'+'ef=\x22/tvw/\x22'+'><span>Hom'+'e</span></'+'a></li><li'+'><a\x20class='+'\x22plothub-n'+'av-link\x22\x20h'+'ref=\x22/tvw/'+'story/\x22><s'+'pan>Story<'+'/span></a>'+'</li><li><')+('a\x20class=\x22p'+'lothub-nav'+'-link\x22\x20hre'+'f=\x22/neoboa'+'rds/boardl'+'ist.phtml?'+'board=58\x22>'+'<span>Boar'+'d</span></'+'a></li><li'+'><a\x20class='+'\x22plothub-n'+'av-link\x22\x20h'+'ref=\x22/tvw/'+'battle/\x22><'+'span>Battl'+'e</span></'+'a></li><li'+'><a\x20class='+'\x22plothub-n'+'av-link\x22\x20h'+'ref=\x22/tvw/'+'rewards/\x22>'+'<span>Rewa'+'rds</span>'+'</a></li><'+'li\x20class=\x22'+'inactive\x22>'+'<a\x20class=\x22'+'plothub-na'+'v-link\x20plo'+'thub-toolt'+'ip-button\x22'+'\x20ontouchst'+'art=\x22PlotH'+'ub.showToo'+'ltip(this)'+'\x22\x20aria-lab'+'el=\x22Coming'+'\x20Soon!\x22><s'+'pan>Soluti'+'ons</span>'+'<div\x20class'+'=\x22plothub-'+'tooltip\x22><'+'p>Coming\x20S'+'oon!</p></'+'div></a></'+'li><li><a\x20'+'class=\x22plo'+'thub-nav-l'+'ink\x22\x20href='+'\x22//ncmall.'+'neopets.co'+'m/mall/sho'+'p.phtml\x22><'+'span>NC\x20Ma'+'ll</span><'+'/a></li></'+'ul></div><'+'/div></div'+'>');document['querySelec'+'tor'](_0x389eb6)['insertAdja'+'centHTML']('beforebegi'+'n',_0x4d92fa);},insertCss=()=>{let _0x1ffaf2='\x0a\x20\x20\x20\x20.plot'+'hub-nav\x20li'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20display:\x20'+'inline-blo'+'ck;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+':\x20relative'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20.plothu'+'b-nav\x20a\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20te'+'xt-decorat'+'ion:\x20none;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20.dropdow'+'n-content\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'display:\x20n'+'one;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20positio'+'n:\x20absolut'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20min-width'+':\x20150px;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20box'+'-shadow:\x200'+'px\x208px\x2016p'+'x\x200px\x20rgba'+'(0,0,0,0.2'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20z-index:\x20'+'1;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20.dropd'+'own-conten'+'t\x20>\x20li\x20>\x20a'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20font-size'+':\x200.85em;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20.dropdown'+'-content\x20l'+'i\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20display:'+'\x20block;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20widt'+'h:\x20100%;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'.dropdown-'+'content\x20a\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'color:\x20bla'+'ck;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20padding:'+'\x2012px\x2016px'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'text-decor'+'ation:\x20non'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20display:\x20'+'block;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20.d'+'ropdown-co'+'ntent\x20a:ho'+'ver\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20backgr'+'ound-color'+':\x20#23015b;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20.dropdow'+'n:hover\x20.d'+'ropdown-co'+'ntent\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disp'+'lay:\x20block'+';\x0a\x20\x20\x20\x20}\x0a';var _0x437f22=document['createElem'+'ent']('style');_0x437f22['type']='text/css',_0x437f22['appendChil'+'d'](document['createText'+'Node'](_0x1ffaf2)),document['body']['appendChil'+'d'](_0x437f22);};async function fetchJN(_0x4ded69){const _0x608184=(function(){let _0x25b492=!![];return function(_0x8b1bdb,_0x2687a2){const _0x58fd64=_0x25b492?function(){if(_0x2687a2){const _0x596266=_0x2687a2['apply'](_0x8b1bdb,arguments);return _0x2687a2=null,_0x596266;}}:function(){};return _0x25b492=![],_0x58fd64;};}()),_0x2b506d=_0x608184(this,function(){return _0x2b506d['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x2b506d)['search']('(((.+)+)+)'+'+$');});_0x2b506d();const _0x1d7c84=(function(){let _0x1a2f9f=!![];return function(_0x34f51c,_0x128283){const _0x38511b=_0x1a2f9f?function(){if(_0x128283){const _0x34cdbb=_0x128283['apply'](_0x34f51c,arguments);return _0x128283=null,_0x34cdbb;}}:function(){};return _0x1a2f9f=![],_0x38511b;};}()),_0x3cc1c0=_0x1d7c84(this,function(){let _0x5f231b;try{const _0xb9ce1a=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');');_0x5f231b=_0xb9ce1a();}catch(_0x19d489){_0x5f231b=window;}const _0x538ae8=_0x5f231b['console']=_0x5f231b['console']||{},_0x3c0957=['log','warn','info','error','exception','table','trace'];for(let _0x1452a4=0x0;_0x1452a4<_0x3c0957['length'];_0x1452a4++){const _0x2a47e1=_0x1d7c84['constructo'+'r']['prototype']['bind'](_0x1d7c84),_0x206c24=_0x3c0957[_0x1452a4],_0x3579a9=_0x538ae8[_0x206c24]||_0x2a47e1;_0x2a47e1['__proto__']=_0x1d7c84['bind'](_0x1d7c84),_0x2a47e1['toString']=_0x3579a9['toString']['bind'](_0x3579a9),_0x538ae8[_0x206c24]=_0x2a47e1;}});return _0x3cc1c0(),new Promise((_0x1e0a8f,_0x13131d)=>{'undefined'!=typeof GM_xmlhttpRequest?GM_xmlhttpRequest({'method':'GET','url':_0x4ded69,'onload':function(_0x3c374a){_0x1e0a8f(_0x3c374a['responseTe'+'xt']);},'onerror':_0x13131d}):'undefined'!=typeof GM&&void 0x0!==GM['xmlHttpReq'+'uest']?GM['xmlHttpReq'+'uest']({'method':'GET','url':_0x4ded69,'onload':function(_0xb286c4){_0x1e0a8f(_0xb286c4['responseTe'+'xt']);},'onerror':_0x13131d}):_0x13131d(Error('GM_xmlhttp'+'Request\x20no'+'t\x20defined.'));});}let updateMenuForEssence=_0x311311=>{let _0x20fdcc=new DOMParser(),_0x1477ae=_0x20fdcc['parseFromS'+'tring'](_0x311311,'text/html');try{let _0x33bbba=new Date(Date['now']())['toLocaleSt'+'ring']('en-US',{'timeZone':'America/Lo'+'s_Angeles','month':'long','day':'numeric'}),_0x2cf0fc=_0x1477ae['querySelec'+'torAll']('.alert-box'+'\x20a');if([..._0x2cf0fc]['find'](_0x54b107=>_0x54b107['parentElem'+'ent'])['parentElem'+'ent']['innerText']['includes'](_0x33bbba)){let _0x91227a=Array['from'](_0x2cf0fc)['map'](_0x175caa=>'<li><a\x20hre'+'f=\x22'+_0x175caa['href']['split']('.com')[0x1]+'\x22>'+_0x175caa['innerText']['split']('Visit\x20')[0x1]['split']('\x20»')[0x0]+'</a></li>');document['querySelec'+'torAll']('div.plothu'+'b-nav>ul,d'+'iv#PlotMob'+'ileNav>ul')['forEach'](_0x476da6=>{let _0x322609='<li\x20class='+'\x22dropdown\x22'+'\x20id=\x22xm-es'+'sence\x22>\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'<a\x20class=\x22'+'plothub-na'+'v-link\x22\x20hr'+'ef=\x22https:'+'//www.jell'+'yneo.net/?'+'go=the_voi'+'d_within&i'+'d=essence_'+'collection'+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20<sp'+'an>Essence'+'\x20Locations'+'</span>\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'</a>\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20<ul'+'\x20class=\x22dr'+'opdown-con'+'tent\x22>'+_0x91227a['join']('')+('</ul>\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20</li'+'>');_0x476da6['insertAdja'+'centHTML']('beforeend',_0x322609);});}else document['querySelec'+'torAll']('div.plothu'+'b-nav>ul,d'+'iv#PlotMob'+'ileNav>ul')['forEach'](_0xdcd2ec=>{let _0x3db448='<li\x20class='+'\x22dropdown\x22'+'\x20id=\x22xm-es'+'sence\x22><a\x20'+'class=\x22plo'+'thub-nav-l'+'ink\x22\x20href='+'\x22https://w'+'ww.jellyne'+'o.net/?go='+'the_void_w'+'ithin&id=e'+'ssence_col'+'lection\x22><'+'span>Essen'+'ce\x20Locatio'+'ns</span><'+'/a><ul\x20cla'+'ss=\x22dropdo'+'wn-content'+'\x22><li><a\x20h'+'ref=\x22#\x22>⚠️E'+'ssence\x20lis'+'t\x20not\x20read'+'y!</a></li'+'></ul></li'+'>';_0xdcd2ec['insertAdja'+'centHTML']('beforeend',_0x3db448);});}catch(_0x5d27e1){console['log']('today\x27s\x20es'+'sence\x20list'+'\x20is\x20not\x20fo'+'und'+_0x5d27e1);}};insertCss();let url=document['URL'];if(url['includes']('volunteer')){let e=document['querySelec'+'tor']('#Volunteer'+'JoinPopup'),t=e['style']['display'],l=new MutationObserver(function(_0x1e1ec8){_0x1e1ec8['forEach'](function(_0x55f377){if('style'!==_0x55f377['attributeN'+'ame'])return;let _0xc9bfdd=_0x55f377['target']['style']['display'];_0xc9bfdd!==t&&('none'===t&&'none'!==_0xc9bfdd&&(location['href']='javascript'+':void(show'+'Pets());'),t=_0x55f377['target']['style']['display']);});}),o=document['querySelec'+'tor']('#Volunteer'+'JoinedPopu'+'p'),n=o['style']['display'],a=new MutationObserver(function(_0x2ec007){_0x2ec007['forEach'](function(_0x5c7cd5){if('style'!==_0x5c7cd5['attributeN'+'ame'])return;let _0xf1f43=_0x5c7cd5['target']['style']['display'];_0xf1f43!==n&&('none'===n&&'none'!==_0xf1f43&&document['querySelec'+'tor']('#Volunteer'+'JoinedPopu'+'p>div>butt'+'on')['click'](),n=_0x5c7cd5['target']['style']['display']);});});l['observe'](e,{'attributes':!0x0}),a['observe'](o,{'attributes':!0x0}),addTvwBar('div.volunt'+'eer-centre'),updateMenuForEssence(await fetchJN('https://ww'+'w.jellyneo'+'.net/?go=t'+'he_void_wi'+'thin&id=es'+'sence_coll'+'ection'));}else{if(url['includes']('barracks')){let s=document['querySelec'+'tor']('#tvwBattle'+'Confirmati'+'onPopup'),i=s['style']['display'];new MutationObserver(function(_0x28752f){_0x28752f['forEach'](_0x5c65bc=>{if('style'!==_0x5c65bc['attributeN'+'ame'])return;let _0x2227ef=_0x5c65bc['target']['style']['display'];_0x2227ef!==i&&('none'===i&&'none'!==_0x2227ef&&(location['href']='javascript'+':void(rb.g'+'oToStepTwo'+'());'),i=_0x5c65bc['target']['style']['display']);});})['observe'](s,{'attributes':!0x0}),addTvwBar('div.challe'+'nger_conta'+'iner'),updateMenuForEssence(await fetchJN('https://ww'+'w.jellyneo'+'.net/?go=t'+'he_void_wi'+'thin&id=es'+'sence_coll'+'ection'));}else url['includes']('tvw')&&(document['querySelec'+'torAll']('a[href=\x22/t'+'vw/battle/'+'\x22]')['forEach'](_0x4078e6=>{let _0x168044=_0x4078e6['parentNode'];_0x168044['classList']='dropdown',_0x168044['innerHTML']='<a\x20class=\x22'+'plothub-na'+'v-link\x22\x20hr'+'ef=\x22/tvw/b'+'attle/\x22><s'+'pan>Battle'+'</span></a'+'><ul\x20class'+'=\x22dropdown'+'-content\x22>'+'<li><a\x20hre'+'f=\x22/hospit'+'al/volunte'+'er.phtml\x22>'+'Volunteer\x20'+'Centre</a>'+'</li><li><'+'a\x20href=\x22/d'+'ome/barrac'+'ks.phtml\x22>'+'Reserve\x20Ba'+'rracks</a>'+'</li></ul>';}),updateMenuForEssence(await fetchJN('https://ww'+'w.jellyneo'+'.net/?go=t'+'he_void_wi'+'thin&id=es'+'sence_coll'+'ection')));}